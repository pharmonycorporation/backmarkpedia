<!--**********************************
	Content body start
***********************************-->
<div class="content-body">
	<div class="container-fluid">

		<div class="row page-titles mx-0">
            <div class="col-sm-6 p-md-0">
                <div class="welcome-text">
                    <h4>messaging</h4>
                    <p class="mb-0">messaging management</p>
                </div>
            </div>
            <div class="col-sm-6 p-md-0 justify-content-sm-end mt-2 mt-sm-0 d-flex">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a routerLink="/admin">Dasboard</a></li>
                    <li class="breadcrumb-item "><a routerLink="/admin/email">Messages</a></li>
                    <li class="breadcrumb-item active"><a >Read</a></li>
                </ol>
            </div>
        </div>
		<!-- row -->
		<div class="row">
			<div class="col-lg-12">
				<div class="card">
					<div class="card-body">
						<div class="email-left-box generic-width px-0 mb-5">
							<div class="p-0">
								<a [routerLink]="['/admin/email/send']" class="btn btn-primary btn-block">Ecrire</a>
							</div>
							<div class="mail-list mt-4">
								<a [routerLink]="['/admin/email']" class="list-group-item active"><i
									class="fa fa font-18 align-middle mr-2"></i> Boite de reception <span
								class="badge badge-primary badge-sm float-right">{{messages?.length}}</span> </a>
								<a routerLink="/admin/email/envoi" class="list-group-item">
									<i class="fa fa-paper-plane font-18 align-middle mr-2"></i>Envoyés</a> 
								
								<a routerLink="/admin/email" class="list-group-item">
									<i class="fa fa-star font-18 align-middle mr-2"></i>Reception 
									<span
									class="badge badge-danger text-white badge-sm float-right">{{messages?.length}}</span>
								</a>
							</div>
							
						</div>
						<div class="email-right-box clear-both ml-0 ml-sm-4 ml-sm-0">
							<div class="row">
								<div class="col-12">
									<div class="right-box-padding">
										<div class="toolbar mb-4" role="toolbar">
											<div class="btn-group mb-1 mr-1">
												<button class="btn btn-primary light px-3" (click)="actualiser()" type="button"><i class="ti-reload"></i>
												</button>
											</div>
										</div>
										<div class="read-content">
											<div class="media pt-3 d-sm-flex d-block justify-content-between">
												<div class="clearfix mb-3 d-flex">
													<img class="mr-3 rounded" *ngIf="message?.user?.avatar" width="50" height="50" alt="image" src="https://api.15euros-alatache.com{{message?.user?.avatar}}">
													<div class="media-body mr-2">
														<h5 class="text-primary mb-0 mt-1">{{ (message?.name != null ) ? message?.name :message?.user.firts_name}}</h5>
														<p class="mb-0">{{message?.createdAt | date : 'dd MMMM YYYY  H:mm'}}</p>
													</div>
												</div>
												<!-- <div class="clearfix mb-3">
													<a [routerLink]='["/admin/email/reply/",message?.id]' class="btn btn-primary px-3 ml-2 my-1 light"><i class="fa fa-reply"></i> </a>
												</div> -->
											</div>
											<hr>
											<div class="media mb-2 mt-3">
												<div class="media-body" *ngIf="is_admin_message; else noAdmin"><span class="pull-right">{{message?.createdAt | date : ' H:mm'}}</span>
													<h5 class="my-1 text-primary">Message envoyé depuis l'espace d'administration</h5>
													<p class="read-content-email">
													à: {{message?.email}}</p>
												</div>
												<ng-template #noAdmin>
													<div class="media-body" ><span class="pull-right">{{message?.createdAt | date : ' H:mm'}}</span>
														<h5 class="my-1 text-primary">Message depuis le formulaire de contact</h5>
														<p class="read-content-email">
														à: contact@15euros-alatache.com</p>
													</div>
												</ng-template>
												
											</div>
											<div class="read-content-body">
												
												<p class="mb-2" > {{message?.message}}</p>
												
												<hr>
											</div>
											<!-- <div class="read-content-attachment">
												<h6><i class="fa fa-download mb-2"></i> Attachments
												<span>(3)</span></h6>
												<div class="row attachment">
													<div class="col-auto">
														<a href="javascript:void(0);" class="text-muted">My-Photo.png</a>
													</div>
													<div class="col-auto">
														<a href="javascript:void(0);" class="text-muted">My-File.docx</a>
													</div>
													<div class="col-auto">
														<a href="javascript:void(0);" class="text-muted">My-Resume.pdf</a>
													</div>
												</div>
											</div> -->
											<div *ngIf="is_admin_message == false ">
												<form [formGroup]="replyForm" (ngSubmit)="reply(replyForm.value)" >
													<div class="form-group pt-3">
														<textarea name="write-email" formControlName="message" id="write-email" cols="30" rows="5" class="form-control" placeholder="Repondre à l'expéditeur"></textarea>
													</div>
													<div class="text-right">
														<button class="btn btn-primary " type="submit"> <i class="fa fa-reply"></i> Repondre</button>
													</div>
												</form>
											</div>
											
											

										</div>
										
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<!--**********************************
	Content body end
***********************************-->